<!doctype html>
<html lang="en">

	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Meta -->
		<meta name="description" content="Best Bootstrap Admin Dashboards">
		<meta name="author" content="Bootstrap Gallery" />
		<link rel="canonical" href="https://www.bootstrap.gallery/">
		<meta property="og:url" content="https://www.bootstrap.gallery">
		<meta property="og:title" content="Admin Templates - Dashboard Templates | Bootstrap Gallery">
		<meta property="og:description" content="Marketplace for Bootstrap Admin Dashboards">
		<meta property="og:type" content="Website">
		<meta property="og:site_name" content="Bootstrap Gallery">
		<link rel="shortcut icon" href="/adm/images/favicon.svg">

		<!-- Title -->
		<title>Product List</title>


		<!-- *************
			************ Common Css Files *************
		************ -->
		<!-- Animated css -->
		<link rel="stylesheet" href="/adm/css/animate.css">

		<!-- Bootstrap font icons css -->
		<link rel="stylesheet" href="/adm/fonts/bootstrap/bootstrap-icons.css">

		<!-- Main css -->
		<link rel="stylesheet" href="/adm/css/main.min.css">


		<!-- *************
			************ Vendor Css Files *************
		************ -->

		<!-- Scrollbar CSS -->
		<link rel="stylesheet" href="/adm/vendor/overlay-scroll/OverlayScrollbars.min.css">

		<!-- Data Tables -->
		<link rel="stylesheet" href="/adm/vendor/datatables/dataTables.bs5.css" />
		<link rel="stylesheet" href="/adm/vendor/datatables/dataTables.bs5-custom.css" />
		
				 
		 <!--  강사님 데이트 피커 -->
		 <script
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" media="screen"
        href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css">
		

	</head>

	<body>

		<!-- Loading wrapper start -->
		<!-- <div id="loading-wrapper">
			<div class="spinner">
                <div class="line1"></div>
				<div class="line2"></div>
				<div class="line3"></div>
				<div class="line4"></div>
				<div class="line5"></div>
				<div class="line6"></div>
            </div>
		</div> -->
		<!-- Loading wrapper end -->

		<!-- Page wrapper start -->
		<div class="page-wrapper">

	<!-- SideBar th:block 구문 -->
		<div th:replace="~{adm/infra/v1/include/SideBar :: SideBar}"></div>
			<!-- *************
				************ Main container start *************
			************* -->
			<div class="main-container">

				<!-- Page header starts -->
				<div class="page-header">

					<div class="toggle-sidebar" id="toggle-sidebar"><i class="bi bi-list"></i></div>

					<!-- Breadcrumb start -->
					<ol class="breadcrumb d-md-flex d-none">
						<li class="breadcrumb-item">
							<i class="bi bi-house"></i>
							<a href="index.html">Home</a>
						</li>
						<li class="breadcrumb-item">Products</li>
						<li class="breadcrumb-item breadcrumb-active" aria-current="page">Product List</li>
					</ol>
					<!-- Breadcrumb end -->

					<div th:replace="~{adm/infra/v1/include/Header :: Header}"></div>
				<!-- Content wrapper scroll start -->
				
				
				<div class="content-wrapper-scroll">

					<!-- Content wrapper start -->
					<div class="content-wrapper">

						<!-- Row start -->
						<div class="row">
							<div class="col-sm-12 col-12">

				
									
						<div class="row">
							<div class="col-sm-12 col-12">
								<div class="card" >
									<div class="card-header">
										<div class="card-title mb-3	">Products</div>
									</div>
									
									
									<div class="row mb-3 ms-2 me-2">
										<form name="formList" id="formList" method="post" autocomplete="off">
										
											<!-- search s -->
											<div id="divSearch" class="container-fluid px-0 pb-3">
												<div class="row row-cols-2 row-cols-sm-6 g-2 px-2">
													<div class="col">
														<select id="shDelNy" name="shDelNy" class="form-select form-select-sm">
															<option value="" th:selected="${vo.shDelNy == null}">삭제여부</option>
															<option value="1" th:selected="${vo.shDelNy == 1}">Y</option>
															<option value="0" th:selected="${vo.shDelNy == 0}">N</option>            
														</select>
													</div>
													<div class="col">
														<select class="form-select" name="shDelNy" id="shDelNy">
															<option value="" th:selected="${vo.shDelNy == null}">사용여부</option>
															<option value="1" th:selected="${vo.shDelNy == 1}">Y</option>
															<option value="0" th:selected="${vo.shDelNy == 0}">N</option>
												</select>
											</div>			
													<div class="col">
														<select id="shOptionDate" name="shOptionDate" class="form-select form-select-sm">
															<option value="" th:selected="${vo.shOptionDate == null}">날짜</option>
															<option value="1" th:selected="${vo.shOptionDate == 1}">등록일</option>
															<option value="2" th:selected="${vo.shOptionDate == 2}">수정일</option>
														</select>
													</div>  
													<div class="col">
														<input type="text" id="shDateStart" name="shDateStart" th:value="${#strings.substring(vo.shDateStart, 0, 10)}" placeholder="시작일" class="form-control form-control-sm" autocomplete="off">
														
													</div>              
													<div class="col">
														<input type="text" id="shDateEnd" name="shDateEnd" th:value="${#strings.substring(vo.shDateEnd, 0, 10)}" placeholder="종료일" class="form-control form-control-sm" autocomplete="off">
													</div> 
												</div>
												<div class="row row-cols-2 row-cols-sm-6 g-2 mt-1 px-2">
													<div class="col">
														<select id="shOption" name="shOption" class="form-select form-select-sm">
															<option value=""   th:selected="${vo.shOption == null}">검색구분</option>
															<option value="1" th:selected="${vo.shOption == 1}">제품 시퀀스</option>
															<option value="2" th:selected="${vo.shOption == 2}">제품 이름</option>
														</select>
													</div>                    
													<div class="col">
														<input type="text" id="shValue" name="shValue" th:value="${vo.shValue}" onkeyup="enterkey()" placeholder="검색어" class="form-control form-control-sm">
														<div class="invalid-feedback" id="shValueFeedback"></div>
													</div> 
													<div class="col">
														<button type="button" id="btnSearch" class="btn btn-outline-secondary btn-sm btn_custom"><i class="fa-solid fa-magnifying-glass fa-lg"></i></button>
														<button type="button" id="btnReset" class="btn btn-outline-secondary btn-sm btn_custom"><i class="fa-solid fa-rotate-right fa-lg"></i></button>
													</div>    
												</div>
											</div>
											<!-- search e -->	
										
										</form>

								
										<div class="row mt-1 mb-3">
										<div class="col">
											<div>Total Count: <span th:text="${listCount}"></span></div>
										</div>
									</div>
									 <div class="row mb-3">
									 	<div class="col">
									 		<a th:href="@{/AddProduct}" >
									 		<button type="button" class="btn btn-outline-primary">등록</button>
									 		</a>
									 	</div>
								
									 </div>
												    
				<!-- Content wrapper scroll start -->
				<div class="content-wrapper-scroll">

					<!-- Content wrapper start -->
					<div class="content-wrapper" >
																
						<!-- Row start -->
						<div class="row">
							<div class="col-sm-12 col-12">
								
										<div class="table-responsive">
										<table class="table v-middle" style="table-layout:fixed;">
									    	<tr style="font-weight: bold; font-style: italic;">
												<th scope="col"><input class="form-check-input" type="checkbox" id="checkAll" /></th>
									    		<th style="width : 100px;">productSeq</th>
									    		<th style="width : 80px;">delNY</th>
									    		<th style="width : 200px;">ProductName</th>
									    		<th style="width :100px">OrgPrice</th>
									    		<th>DiscountedPrice</th>
									    		<th>prodStockCD</th>
									    		<th>categoryCD</th>
									    		<th>regDateTime</th>
									    		<th>modDateTime</th>
									    		
									    	</tr>
										
									    	<tr th:if="${!#lists.isEmpty(list)}" th:each="list:${list}"> 
												<td>
													<input class="form-check-input chk" type="checkbox" name="chk" th:value="${list.productSeq}" />
												</td>
									    		<td th:text="${list.productSeq}"></td>
									    		<td th:if="${list.delNY eq 0}">N</td>
									     		<td th:unless="${list.delNY eq 0}">Y</td>
									    		<td>
									    			<a th:href="@{/ProductView(productSeq=${list.productSeq}, ProductName=${list.ProductName}, delNY=${list.delNY})}"  th:text="${list.ProductName}"></a>
									    		</td>
									     		
									    		<td th:text="${list.OrgPrice}" class="old-price" ></td>
									    		<td th:text="${list.DiscountedPrice}" class="product-price"></td>
									    		
									    		<td th:if="${list.prodStockCD!= null}" th:text="${@codeService.selectOneCachedCode(list.prodStockCD)}" class="prodStockCD align-middle"></td>
												<td th:unless="${list.prodStockCD != null}" class="prodStockCD align-middle"></td>
												
												
												<td th:if="${list.categoryCD!= null}" th:text="${@codeService.selectOneCachedCode(list.categoryCD)}" class="categoryCD align-middle"></td>
												<td th:unless="${list.categoryCD != null}" class="categoryCD align-middle"></td>

									    	<!-- 	<td>
									    		<th:block th:switch="${list.genderCD}">
												    <span th:case="1">남성</span>
												    <span th:case="2">여성</span>
												    <span th:case="3">기타</span>
												</th:block>
												</td> -->
												 
<!-- 									    <td th:if="${list.genderCD eq 1}">남성</td>
									    		<td th:unless="${list.genderCD eq 2}">여성</td>  -->

									       		<td th:text="${#dates.format(list.regDateTime,  'yyyy-MM-dd')}"></td>
									     		<td th:text="${#dates.format(list.modDateTime,  'yyyy-MM-dd')}"></td>
									    	</tr>
									    </table>
										</div>
									</div>
								</div>

<!--								<nav aria-label="Page Navigation" class="mt-3">-->
<!--									<ul class="pagination justify-content-center">-->
<!--										<li th:if="${vo.startPage > vo.pageNumToShow}" class="page-item">-->
<!--											<a class="page-link" href="#" th:onclick="'javascript:goList(' + (${vo.startPage - 1}) + ')'" aria-label="Previous">-->
<!--												<span aria-hidden="true"><i class="bi bi-arrow-left"></i></span>-->
<!--											</a>-->
<!--										</li>-->
										
<!--										<li th:each="num : ${#numbers.sequence(vo.startPage, vo.endPage)}"-->
<!--											th:classappend="${num eq vo.thisPage} ? 'active' : ''" class="page-item">-->
<!--											<a class="page-link" th:onclick="'javascript:goList(' + ${num} + ')'" th:text="${num}" href="#">nums</a>-->
<!--										</li>-->
										
<!--										<li th:if="${vo.endPage != vo.totalPages}" class="page-item">-->
<!--											<a class="page-link" th:onclick="'javascript:goList(' + (${vo.endPage + 1}) + ')'" aria-label="Next">-->
<!--												<span aria-hidden="true"><i class="bi bi-arrow-right"></i></span>-->
<!--											</a>-->
<!--										</li>-->
<!--									</ul>-->
<!--								</nav>-->

							<div class="form-actions-footer">
								<a class="btn btn-primary btn-m mb-1" th:href="@{/AddProduct}" id="addKey" style="display : inline-flex; align-items : center; justify-content : center; width : 40px">
								    <i class="bi bi-pencil"></i>
								</a>

						
								<button class="btn btn-danger btn-icon btn-m mb-1" id="btnModalUelete" data-bs-toggle="modal" data-bs-target="#exampleModal">
								    <i class="bi bi-trash"></i>
								</button>
								
								<button class="btn btn-success btn-icon btn-m mb-1" id="btnExcelFile">
									<i class="bi bi-file-earmark-excel"></i>
								</button>	

			               </div>
								<!-- Card end -->

							</div>
						</div>
						<!-- Row end -->

					</div>
					<!-- Content wrapper end -->

					<!-- App Footer start -->
					<div class="app-footer">
						<span>© Arise admin 2023</span>
					</div>
					<!-- App footer end -->

				</div>
				<!-- Content wrapper scroll end -->
				
				
				<!-- Add Modals Here -->
				<div class="modals-placeholder">
				
								<!-- Modal 1 -->
					<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
						aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="exampleModalLabel">삭제</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									삭제하시겠습니까?
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-dark" data-bs-dismiss="modal">닫기</button>
									<button type="submit" class="btn btn-warning"th:href="@{/orders}" th:text="Uelete"></button>
									<button type="submit" class="btn btn-danger" th:href="@{/orders}" th:text="Delete"></button>

								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
			<!-- *************
				************ Main container end *************
			************* -->

		</div>
		<!-- Page wrapper end -->

		<!-- *************
			************ Required JavaScript Files *************
		************* -->
		<!-- Required jQuery first, then Bootstrap Bundle JS -->
		<script src="/adm/js/jquery.min.js"></script>
		<script src="/adm/js/bootstrap.bundle.min.js"></script>
		<script src="/adm/js/modernizr.js"></script>
		<script src="/adm/js/moment.js"></script>

		<!-- *************
			************ Vendor Js Files *************
		************* -->

		<!-- Overlay Scroll JS -->
		<script src="/adm/vendor/overlay-scroll/jquery.overlayScrollbars.min.js"></script>
		<script src="/adm/vendor/overlay-scroll/custom-scrollbar.js"></script>

		<!-- Data Tables -->
		<script src="/adm/vendor/datatables/dataTables.min.js"></script>
		<script src="/adm/vendor/datatables/dataTables.bootstrap.min.js"></script>

		<!-- Custom Data tables -->
		<script src="/adm/vendor/datatables/custom/custom-datatables.js"></script>

		<!-- Main Js Required -->
		<script src="/adm/js/main.js"></script>
		
		
		<script type="text/javascript">

	window.addEventListener('load', function() {
			$("#shDateStart, #shDateEnd").datetimepicker();
	}); 
	
	let goUrlXdmList = "/ProductList";								/* ### */
	let goUrlXdmForm = "/v1/infra/code/PordersForm";								/* ### */
	//let goUrlXdmMultiUele = "/v1/infra/codegroup/codeGroupXdmMultiUele";			/* ### */
	let goUrlXdmMultiDele = "/v1/infra/codegroup/codeGroupXdmMultiDele";			/* ### */
	let goUrlXdmView = "/v1/infra/codegroup/codeGroupXdmView";								/* ### */
	
	let seq = document.querySelector("input[name=ifcgSeq]");									/* ### */

	document.getElementById("btnReset").onclick = function () {
	    location.href = goUrlXdmList;
	}

/* 	document.getElementById("btnForm").onclick = function () {
	    goForm(0);
	}
 */

	goForm = function (keyValue) {
	    seq.value = keyValue;
	    form.action = goUrlXdmForm;
	    form.submit();
	}
	
	document.getElementById("btnSearch").onclick = function () {
	    form.action = goUrlXdmList;
	    form.submit();
	};
	
	let form = document.querySelector("form[name=formList]");
	</script>
	
	<!-- 강사님 데이터 피커 -->
<!--데이터피커 자바스크립트 구문-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js"></script>
        <script type="text/javascript">
            $(function () {
                $("#shDateStart, #shDateEnd").datetimepicker({
                    format: "Y-m-d",
                    timepicker:false,
                });
            });
        </script>
		<!-- jQuery CDN 추가 -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		
		<!-- 페이지 로드 시 실행될 스크립트 -->
		<script>
		    // 페이지가 로드될 때 실행되는 함수
		    $(document).ready(function() {
		        // 페이지 로드가 완료되면 테이블을 표시
		        $('.table-responsive').css('visibility', 'visible');
		    });
		</script>
		
		<script>
			//체크박스 삭제 구문
			let goUrlXdmMultiUele = "/ProductMultiUelete";		
			let checkboxSeqArray = [];
			
			
			$("#btnModalUelete").on("click", function(){
				$("input[name=chk]:checked").each(function(){ 
					// check된것을 찾고 체크된 값만 넘김
					checkboxSeqArray.push($(this).val());  // check 해당된 값을 담는다.
				});				
				
				// checkboxSeqArray 값을 form 데이터로 추가
			    let hiddenInput = document.createElement("input");
			    hiddenInput.setAttribute("type", "hidden");
			    hiddenInput.setAttribute("name", "checkboxSeqArray");
			    hiddenInput.setAttribute("value", checkboxSeqArray.join(","));
			    form.appendChild(hiddenInput);
				
				$("#modalConfirm").modal("hide");
				
				// 폼의 action 속성 변경
		        form.action = goUrlXdmMultiUele;
		        
		        // 폼 제출
		        form.submit();
				
			});
		</script>
		
		<!-- 가격 포맷팅 -->
		<script>
		    // 가격 관련 스크립트
		    function formatPriceElements() {
		        // HTML 요소를 가져와서 가격 포맷팅 적용
		        var oldPriceElements = document.querySelectorAll('.old-price');
		        var productPriceElements = document.querySelectorAll('.product-price');
		
		        oldPriceElements.forEach(function(element) {
		            var price = parseFloat(element.textContent);
		            element.textContent = formatPrice(price);
		        });
		
		        productPriceElements.forEach(function(element) {
		            var price = parseFloat(element.textContent);
		            element.textContent = formatPrice(price);
		        });
		    }
		
		    // 가격 포맷팅 함수
		    function formatPrice(price) {
		        // 세 자리마다 컴마 추가
		        var formattedPrice = price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
		        // '원'을 추가하여 반환
		        return "₩" + formattedPrice;
		    }
		
		    // 페이지 로드 시 가격 포맷팅 적용
		    document.addEventListener('DOMContentLoaded', function() {
		        formatPriceElements();
		    });
		</script>

		<script>
		    $(document).ready(function() {
		        $('#btnExcelFile').on('click', function() {
		            // 생성된 엑셀 파일을 다운로드
		            window.location.href = 'excelDownload';
		        });
		    });
		</script>


	<!-- Date Range JS -->
	<!-- 
	<script src="/adm/vendor/daterange/daterange.js"></script>
	<script src="adm/vendor/daterange/custom-daterange.js"></script>
 -->

	</body>

</html>