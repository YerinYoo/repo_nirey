<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Porto - Bootstrap eCommerce Template</title>

    <meta name="keywords" content="HTML5 Template" />
    <meta name="description" content="Porto - Bootstrap eCommerce Template">
    <meta name="author" content="SW-THEMES">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/usr/images/icons/favicon.png">

    <script>
        WebFontConfig = {
            google: { families: [ 'Open+Sans:300,400,600,700,800', 'Poppins:300,400,500,600,700' ] }
        };
        ( function ( d ) {
            var wf = d.createElement( 'script' ), s = d.scripts[ 0 ];
            wf.src = '/usr/js/webfont.js';
            wf.async = true;
            s.parentNode.insertBefore( wf, s );
        } )( document );
    </script>
    
    <script>
	// 모달 창 표시 함수
	 function showModal() {
	     var modal = document.getElementById('showModal');
	     if (modal) {
	         modal.style.display = "block"; // 모달을 보이게 함
	     
	         // 모달 닫기 버튼에 대한 이벤트 처리
	         var closeBtn = document.getElementById("modalCloseButton");
	         closeBtn.onclick = function() {
	             modal.style.display = "none";
	         }

	         // 윈도우 클릭 시 모달 닫기
	         window.onclick = function(event) {
	             if (event.target === modal) {
	                 modal.style.display = "none";
	             }
	         }
	     } else {
	         console.log("showModal을 찾을 수 없습니다.");
	     }
	 }

	 // 페이지 로드 후 모달 표시
	 window.onload = function() {
	     showModal();
	 };

    </script>

    <!-- Plugins CSS File -->
    <link rel="stylesheet" href="/usr/css/bootstrap.min.css">

    <!-- Main CSS File -->
    <link rel="stylesheet" href="/usr/css/demo3.min.css">
    <link rel="stylesheet" type="text/css" href="/usr/vendor/fontawesome-free/css/all.min.css">
</head>

<body>
    <div class="page-wrapper">
            <div th:replace="~{/usr/infra/v1/include/Header-Sticker :: Header-Sticker}"></div>

        <main class="main">
            <nav aria-label="breadcrumb" class="breadcrumb-nav">
                <div class="container">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item"><a href="#">Shop</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Top</li>
                    </ol>
                </div><!-- End .container -->
            </nav>

     <div class="container mb-3">
                <div class="row">
                    <div class="col-lg-9 main-content">
                        <div class="category-banner pt-0 pb-2">
                            <img class="slide-bg" src="/usr/images/demoes/demo3/slider/slide-hannip.jpg" style="height : 200px" alt="banner"
                                width="1500" height="320">
                            <div class="category-slide-content pt-1">
                                <h2 class="m-b-3" style="color : ivory; font-size : 20px;">	Feel the Vintage Mood while being Unique</h2>
                                <h3 class="text-uppercase ml-0" style="color : #FF7A85">Up to 10% OFF on ALL PRODUCTS</h3>
                            </div><!-- End .category-slide-content -->
                        </div><!-- End .category-slide -->
                        
                        <nav class="toolbox sticky-header" data-sticky-options="{'mobile': true}">
                            <div class="toolbox-left">
                                <a href="#" class="sidebar-toggle">
                                    <svg data-name="Layer 3" id="Layer_3" viewBox="0 0 32 32"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <line x1="15" x2="26" y1="9" y2="9" class="cls-1"></line>
                                        <line x1="6" x2="9" y1="9" y2="9" class="cls-1"></line>
                                        <line x1="23" x2="26" y1="16" y2="16" class="cls-1"></line>
                                        <line x1="6" x2="17" y1="16" y2="16" class="cls-1"></line>
                                        <line x1="17" x2="26" y1="23" y2="23" class="cls-1"></line>
                                        <line x1="6" x2="11" y1="23" y2="23" class="cls-1"></line>
                                        <path
                                            d="M14.5,8.92A2.6,2.6,0,0,1,12,11.5,2.6,2.6,0,0,1,9.5,8.92a2.5,2.5,0,0,1,5,0Z"
                                            class="cls-2"></path>
                                        <path d="M22.5,15.92a2.5,2.5,0,1,1-5,0,2.5,2.5,0,0,1,5,0Z" class="cls-2"></path>
                                        <path d="M21,16a1,1,0,1,1-2,0,1,1,0,0,1,2,0Z" class="cls-3"></path>
                                        <path
                                            d="M16.5,22.92A2.6,2.6,0,0,1,14,25.5a2.6,2.6,0,0,1-2.5-2.58,2.5,2.5,0,0,1,5,0Z"
                                            class="cls-2"></path>
                                    </svg>
                                    <span>Filter</span>
                                </a>

                                <div class="toolbox-item toolbox-sort mb-3">
                                    <label>Sort By:</label>

                                    <div class="select-custom">
                                        <select name="orderby" class="form-control">
                                            <option value="menu_order" selected="selected">Default sorting</option>
                                            <option value="popularity">Sort by popularity</option>
                                            <option value="rating">Sort by average rating</option>
                                            <option value="date">Sort by newness</option>
                                            <option value="price">Sort by price: low to high</option>
                                            <option value="price-desc">Sort by price: high to low</option>
                                        </select>
                                    </div><!-- End .select-custom -->


                                </div><!-- End .toolbox-item -->
                            </div><!-- End .toolbox-left -->
							<form id="formList" action="/recordedShop" method="GET">

                        </nav>

                        <!-- 검색 결과가 없거나, 검색을 이용하지 않고 페이지에 접속 했을 때HTML 코드 -->
						<!-- 검색 결과가 없을 경우 띄워줄 모달 코드 -->
						<div class="modal" id="showModal" tabindex="-1" aria-labelledby="showModalLabel" aria-hidden="true" th:if="${showModal}" style="width:25%; position : fix; left : 35%;">
						    <div class="modal-dialog">
						        <div class="modal-content">
						            <div class="modal-header">
						                <h5 class="modal-title" id="alertModalLabel">Notification</h5>
						            </div>
						            <div class="modal-body mt-2 mb-2">
						                Try again with a different keyword <br> There are currently no products that match the value entered
						            </div>
						            <div class="modal-footer">
						                <button type="button" class="btn btn-secondary" id="modalCloseButton" data-bs-dismiss="modal">Close</button>
						            </div>
						        </div>
						    </div>
						</div>
						
						<!-- 페이지 단에 띄워줄 전체 상품 표출 코드 -->
						<div class="row">
						    <div class="col-6 col-sm-4 col-md-3 col-xl-5col" th:each="product : ${prodList}">
						        <div class="product-default inner-quickview inner-icon">
						            <figure>
						                <a th:href="@{/recorded/Shop/Product(productSeq=${product.productSeq}, ProudctName=${product.ProductName})}" >
						                    <img src="/usr/images/demoes/demo3/products/product-15.jpg" width="273" height="273" alt="productr"/>
						                </a>
						                <div class="label-group">
		                                     <div th:if="${product.prodStockCD == 7}" class="product-label label-hot">NEW</div>
		                                    <div th:if="${product.prodStockCD == 8}" class="product-label label-sale">BEST</div>
		                                    <div th:if="${product.prodStockCD == 9}" class="product-label label-restock" style="background-color: rgb(96, 133, 165);">RESTOCK</div>
		                                </div>
						                <a class="btn-quickview" title="goProd" >View Details</a>
						            </figure>
						            <div class="product-details">
						                <div class="category-wrap">
						                    <div class="category-list">
						                        <a th:if="${product.category1CD != null}" th:text="${@codeService.selectOneCachedCode(product.category1CD)}"></a>
						                        <a th:unless="${product.category1CD != null}" th:text="${product.category1CD}"></a>
						                        <a th:if="${product.category2CD != null}" th:text="${@codeService.selectOneCachedCode(product.category2CD)}"></a>
						                        <a th:unless="${product.category2CD != null}" th:text="${product.category2CD}"></a>
						                    </div>
						                </div>
						                <h3 class="product-title">
						                    <a  th:text="${product.ProductName}"></a>
						                </h3>
										<div class="ratings-container">
										    <div class="product-ratings">
										        <span class="ratings" th:if="${product.reviewRateAvg == 5}" style="width:100%"></span>
										        <span class="ratings" th:if="${product.reviewRateAvg == 4}" style="width:80%"></span>
										        <span class="ratings" th:if="${product.reviewRateAvg == 3}" style="width:60%"></span>
										        <span class="ratings" th:if="${product.reviewRateAvg == 2}" style="width:40%"></span>
										        <span class="ratings" th:if="${product.reviewRateAvg == 1}" style="width:20%"></span>
										        <span class="ratings" th:if="${product.reviewRateAvg == null}" style="width:0%"></span>
										        <span class="tooltiptext tooltip-top"></span>
										    </div>
										</div>
						                <div class="price-box">
						                    <span class="old-price" th:text="${product.OrgPrice}"></span>
						                    <span class="product-price" th:text="${product.DiscountedPrice}"></span>
						                </div>
						            </div>
						        </div>
						    </div>
						</div>
						<!-- 검색 값에 해당하는 제품만 반환하는 코드 -->
						
						<div class="row" th:unless="${#lists.isEmpty(searchResults)}">
						    <div class="col-6 col-sm-4 col-md-3 col-xl-5col" th:each="product : ${searchResults}">
						        <div class="product-default inner-quickview inner-icon">
						            <figure>
						                 <a th:href="@{/recorded/Shop/Product(productSeq=${product.productSeq}, ProudctName=${product.ProductName}, prodStockCD=${product.prodStockCD})}" >
						                    <img src="/usr/images/demoes/demo3/products/product-15.jpg" width="273" height="273" alt="productr"/>
						                </a>
						                <div class="btn-icon-group">
						                    <a th:href="@{/recorded/Shop/Product(productSeq=${product.productSeq}, ProudctName=${product.ProductName})}" class="btn-icon btn-add-cart product-type-simple"><i class="icon-shopping-cart"></i></a>
						                </div>
						                <a th:href="@{/recorded/Shop/Product(productSeq=${product.productSeq}, ProudctName=${product.ProductName})}"  class="btn-quickview" title="Quick View">Quick View</a>
						            </figure>
						            <div class="product-details">
						                <div class="category-wrap">
		                					<div class="category-list">
												<a th:if="${product.category1CD != null}" th:text="${@codeService.selectOneCachedCode(product.category1CD)}"></a>
												<a th:unless="${product.category1CD != null}" th:text="${product.category1CD}" ></a>
												<a th:if="${product.category2CD != null}" th:text="${@codeService.selectOneCachedCode(product.category2CD)}"></a>
												<a th:unless="${product.category2CD != null}" th:text="${product.category2CD}" ></a>
							                </div>

						                </div>
						                <h3 class="product-title">
						                    <a href="demo3-product.html" th:text="${product.ProductName}"></a>
						                </h3>
										<div class="ratings-container">
										    <div class="product-ratings">
										        <span class="ratings" th:if="${product.reviewRateAvg == 5}" style="width:100%"></span>
										        <span class="ratings" th:if="${product.reviewRateAvg == 4}" style="width:80%"></span>
										        <span class="ratings" th:if="${product.reviewRateAvg == 3}" style="width:60%"></span>
										        <span class="ratings" th:if="${product.reviewRateAvg == 2}" style="width:40%"></span>
										        <span class="ratings" th:if="${product.reviewRateAvg == 1}" style="width:20%"></span>
										        <span class="ratings" th:if="${product.reviewRateAvg == null}" style="width:0%"></span>
										        <span class="tooltiptext tooltip-top"></span>
										    </div>
										    <a style="padding: 0; margin: 0;" href="#" class="rating-link" th:text="'(' + ${product.totalReviewCount} + ')'"></a>
										</div>

						                <div class="price-box">
						                    <span class="old-price" th:text="${product.OrgPrice}"></span>
						                    <span class="product-price" th:text="${product.DiscountedPrice}"></span>
						                </div>
						            </div>
						        </div>
						    </div>
						</div>

					<!-- paging s  -->		
						<form name="formList" id="formList" method="post" autocomplete="off">		
						    <div class="container-fluid px-0 mt-2 mb-2">
						        <div class="row">
						            <div class="col">
						                <ul class="pagination justify-content-center mb-0">
						                    <!-- 수정 시작 -->
						                    <li th:if="${vo.startPage gt vo.pageNumToShow}" class="page-item" style="cursor: pointer;">
						                        <a class="page-link" href="javascript:goList(${vo.startPage - 1})" th:attr="onclick=|goList('${vo.startPage - 1}')|"><i class="fa-solid fa-angle-left"></i></a>
						                    </li>
						                    <li th:each="num: ${#numbers.sequence(vo.startPage != null ? vo.startPage : 1, vo.endPage != null ? vo.endPage : 1)}" th:classappend="${num eq vo.thisPage} ? 'active' : ''" class="page-item" style="cursor: pointer;">
						                        <a class="page-link" th:attr="onclick=|goList('${num}')|" th:text="${num}"></a>
						                    </li>
						                    <li th:if="${vo.endPage ne vo.totalPages}" class="page-item" style="cursor: pointer;">
						                        <a class="page-link" th:attr="onclick=|goList('${vo.endPage + 1}')|"><i class="fa-solid fa-angle-right"></i></a>
						                    </li>
						                    <!-- 수정 끝 -->
						                </ul>
						            </div>
						        </div>
						    </div>





						
						<!-- 히든 필드를 통해 페이지 번호를 전달할 폼 -->
						
						    <input type="hidden" name="thisPage" id="thisPage" th:value="${vo.thisPage}" th:if="${vo.thisPage != null and vo.thisPage.getClass().getSimpleName() == 'Integer'}" />
							<input type="hidden" name="thisPage"  id="thisPage"value="1" th:unless="${vo.thisPage != null and vo.thisPage.getClass().getSimpleName() == 'Integer'}" />
						</form>

                        
                    </div><!-- End .main-content -->

                    <div class="sidebar-overlay"></div>
                    <aside class="sidebar-shop col-lg-3 order-lg-first mobile-sidebar">
                        <div class="sidebar-wrapper">
                            <div class="widget">
                                <h3 class="widget-title">
                                    <a data-toggle="collapse" href="/home" role="button" aria-expanded="true"
                                        aria-controls="widget-body-2">Categories</a>
                                </h3>

							<div class="collapse show" id="widget-body-2">
							    <div class="widget-body">
								    <div class="clothes">
								        <ul>
								        <a>Clothes</a>
								        <li style="padding-left: 10%;"><a th:href="@{/recorded/Shop?category1CD=11}">Outer</a></li>
								        <li style="padding-left: 10%;"><a th:href="@{/recorded/Shop?category1CD=12}">Top</a></li>
								        <li style="padding-left: 10%;"><a th:href="@{/recorded/Shop?category1CD=13}">Bottom</a></li>
								        <li style="padding-left: 10%;"><a th:href="@{/recorded/Shop?category1CD=14}">Dress</a></li>
								        </ul>
								    </div>
								    <div class="non-clothes">
								        <ul>
								        <a>Non-Clothes</a>
								        <li style="padding-left: 10%;"><a th:href="@{/recorded/Shop?category2CD=15}">Bag</a></li>
								        <li style="padding-left: 10%;"><a th:href="@{/recorded/Shop?category2CD=16}">Shoes</a></li>
								        <li style="padding-left: 10%;"><a th:href="@{/recorded/Shop?category2CD=17}">Acc.</a></li>
								        <li style="padding-left: 10%;"><a th:href="@{/recorded/Shop?category2CD=18}">Etc.</a></li>
								       	</ul>
								    </div>
								</div><!-- End .widget-body -->

							</div><!-- End .collapse -->

                            <div class="widget widget-size">
                                <h3 class="widget-title">
                                    <a data-toggle="collapse" href="#widget-body-5" role="button" aria-expanded="true"
                                        aria-controls="widget-body-5">Size</a>
                                </h3>

                                <div class="collapse show" id="widget-body-5">
                                    <div class="widget-body">
                                        <ul class="config-size-list">
                                            <li class="active"><a href="#">One Size</a></li>
                                            <li><a href="#">S</a></li>
                                            <li><a href="#">M</a></li>
                                            <li><a href="#">L</a></li>
                                        </ul>
                                    </div><!-- End .widget-body -->
                                </div><!-- End .collapse -->
                            </div><!-- End .widget -->

                        </div><!-- End .sidebar-wrapper -->
                    </aside><!-- End .col-lg-3 -->
                </div><!-- End .row -->
            </div><!-- End .container -->
        </main><!-- End .main -->

<div th:replace="~{/usr/infra/v1/include/Footer :: Footer}"></div>

    <!-- Plugins JS File -->
    
    <script src="/usr/js/jquery.min.js"></script>
    <script src="/usr/js/bootstrap.bundle.min.js"></script>
    <script src="/usr/js/plugins.min.js"></script>
    <script src="/usr/js/nouislider.min.js"></script>

    <!-- Main JS File -->
    <script src="/usr/js/main.min.js"></script>
    
<script>

//가격 관련 스크립트
function formatPriceElements() {
    // HTML 요소를 가져와서 가격 포맷팅 적용
    var oldPriceElements = document.querySelectorAll('.old-price');
    var productPriceElements = document.querySelectorAll('.product-price');

    oldPriceElements.forEach(function(element) {
        var price = parseFloat(element.textContent);
        element.textContent = formatPrice(price);
    });

    productPriceElements.forEach(function(element) {
        var price = parseFloat(element.textContent);
        element.textContent = formatPrice(price);
    });
}

// 가격 포맷팅 함수
function formatPrice(price) {
    // 세 자리마다 컴마 추가
    var formattedPrice = price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    // '원'을 추가하여 반환
    return "₩" + formattedPrice ;
}

// 문서 로드 후에 실행
document.addEventListener('DOMContentLoaded', function() {
    formatPriceElements();
});

//상품 이미지에 커서 올렸을 때 뜨는 quick View로 반환하는 버튼 비활성화
//그냥 상품 페이지로 바로 연결됨-!
//버튼 요소 선택
var btn = document.querySelector('.btn-quickview');

// 버튼 비활성화
btn.disabled = true;
</script>




   
</body>

</html> 